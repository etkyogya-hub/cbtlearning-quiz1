<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Daily Content Factory — CBTLearning</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{
  margin:0;
  padding:0;
  background:#000;
  color:#fff;
  font-family:system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  height:100%;
  overflow:hidden;
}
#app{
  width:100vw;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}
.card{
  width:360px;
  height:640px;
  border:2px solid #222;
  border-radius:16px;
  padding:16px;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
}
.hook{
  font-size:26px;
  font-weight:700;
  text-align:center;
}
.question{
  font-size:22px;
  text-align:center;
}
.options{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
  margin-top:12px;
}
.opt{
  border:1px solid #444;
  padding:10px;
  border-radius:8px;
  text-align:center;
}
.footer{
  font-size:14px;
  opacity:.8;
  text-align:center;
}
.badge{
  font-size:12px;
  opacity:.7;
  text-align:center;
}
.btn{
  margin-top:8px;
  padding:10px;
  background:#fff;
  color:#000;
  border:none;
  border-radius:8px;
  font-weight:700;
}
</style>
</head>
<body>

<div id="app">
  <div class="card">
    <div class="badge" id="mode"></div>
    <div class="hook" id="hook"></div>
    <div class="question" id="question"></div>
    <div class="options" id="options"></div>
    <div class="footer" id="footer"></div>
    <button class="btn" onclick="next()">NEXT</button>
  </div>
</div>

<script>
// ============================
// DAILY CONTENT FACTORY CORE
// ============================

// --- HOOKS ---
const HOOKS = [
  "Only 1% get this right",
  "Most people fail this",
  "Your brain will trick you",
  "Don’t answer too fast",
  "This looks easy… but isn’t"
];

// --- CTA ---
const CTAS = [
  "Comment your answer",
  "Replay if you failed",
  "Follow for daily brain tests",
  "Try again tomorrow"
];

// --- TRAPS (SAMPLE, expandable) ---
const TRAPS = [
  {id:1,type:"numeric",q:"7 + 7 × 0 = ?",o:["0","7","14","49"],a:"7"},
  {id:2,type:"numeric",q:"(8 ÷ 4)² = ?",o:["4","2","8","16"],a:"4"},
  {id:3,type:"logic",q:"If all bloops are razzies and all razzies are lazzies, are all bloops lazzies?",o:["Yes","No","Maybe","Unknown"],a:"Yes"},
  {id:4,type:"logic",q:"Which is heavier: 1kg of steel or 1kg of feathers?",o:["Steel","Feathers","Same","Unknown"],a:"Same"},
  {id:5,type:"pattern",q:"2, 4, 8, 16, ?",o:["18","24","30","32"],a:"32"},
  {id:6,type:"pattern",q:"A C E G ?",o:["H","I","J","K"],a:"I"},
  {id:7,type:"mixed",q:"A bat and ball cost $1.10. Bat costs $1 more than ball. How much is ball?",o:["$0.10","$0.05","$0.01","$0.50"],a:"$0.05"},
  {id:8,type:"mixed",q:"Which has more: 3² or 2³?",o:["3²","2³","Same","None"],a:"Same"}
];

// --- DAILY MODE ---
const MODES = ["numeric","logic","pattern","mixed"];
const today = new Date().getDay();
const MODE = MODES[today % MODES.length];

// --- MEMORY ---
let used = JSON.parse(localStorage.getItem("used")||"[]");

// --- UTILS ---
function shuffle(a){
  return a.sort(()=>Math.random()-0.5);
}
function pick(arr){
  return arr[Math.floor(Math.random()*arr.length)];
}

// --- BATCH BUILDER ---
function buildBatch(){
  let pool = TRAPS.filter(t=>MODE==="mixed" || t.type===MODE);
  pool = pool.filter(t=>!used.includes(t.id));
  if(pool.length < 3){
    used=[];
    pool = TRAPS;
  }
  pool = shuffle(pool);
  const ladder = pool.slice(0,3);
  ladder.forEach(t=>used.push(t.id));
  localStorage.setItem("used", JSON.stringify(used));
  return ladder;
}

let batch = buildBatch();
let step = 0;

// --- RENDER ---
function render(){
  const q = batch[step];
  document.getElementById("mode").innerText = "MODE: " + MODE.toUpperCase() + " | Q " + (step+1) + "/3";
  document.getElementById("hook").innerText = pick(HOOKS);
  document.getElementById("question").innerText = q.q;

  const optBox = document.getElementById("options");
  optBox.innerHTML="";
  shuffle([...q.o]).forEach(opt=>{
    const d=document.createElement("div");
    d.className="opt";
    d.innerText=opt;
    optBox.appendChild(d);
  });

  document.getElementById("footer").innerText = pick(CTAS);
}

function next(){
  step++;
  if(step>=batch.length){
    batch = buildBatch();
    step = 0;
  }
  render();
}

// INIT
render();
</script>

</body>
</html>
